# リモートリポジトリをクローンしてEclipseで編集する手順

## 前提条件

- リポジトリへのアクセス権限がある（Collaboratorに追加されている）

---

## 1. リポジトリURLを取得

1. GitHubでリポジトリページを開く
2. 緑色の「Code」ボタンをクリック
3. HTTPSのURLをコピー

```
https://github.com/ユーザー名/リポジトリ名.git
```

---

## 2. リポジトリをクローン

### 方法A: コマンドラインから（おすすめ）

```bash
# 作業フォルダに移動
cd /c/webwork
```
# クローン
```bash
git clone https://github.com/ユーザー名/リポジトリ名.git(コピーしたURL)

```

### 方法B: Eclipseから（GUI）

1. **ファイル** → **インポート**
2. **Git** → **Gitからプロジェクト** → 「次へ」
3. **Clone URI** を選択 → 「次へ」
4. URIにリポジトリURLを貼り付け
5. 認証情報を入力（ユーザー名とPersonal Access Token）
6. ブランチを選択（通常は `main`）
7. 保存先ディレクトリを指定
8. 「完了」をクリック

---

## 3. Eclipseにプロジェクトをインポート

クローンしただけではEclipseのワークスペースに表示されません。インポートが必要です。

### 動的Webプロジェクトの場合

1. **ファイル** → **インポート**
2. **一般** → **既存プロジェクトをワークスペースへ** → 「次へ」
3. 「ルート・ディレクトリーの選択」でクローンしたフォルダを指定
4. プロジェクトが表示されたらチェックを入れる
5. 「完了」をクリック

### プロジェクトが認識されない場合

クローンしたフォルダに `.project` ファイルがない場合：

1. **ファイル** → **新規** → **動的Webプロジェクト**
2. 「ロケーション」の「デフォルト・ロケーションの使用」のチェックを外す
3. クローンしたフォルダのパスを指定
4. プロジェクト名を入力
5. 「完了」をクリック

---

## 4. Tomcatサーバーの設定

### サーバーがない場合は作成

1. 「サーバー」ビューで右クリック → **新規** → **サーバー**
2. **Apache** → **Tomcat v9.0サーバー** を選択
3. Tomcatのインストールディレクトリを指定
4. 「完了」をクリック

### プロジェクトをサーバーに追加

1. サーバーを右クリック → **追加および除去**
2. プロジェクトを「構成済み」に移動
3. 「完了」をクリック

---

## 5. データベースの設定

### JDBCドライバの確認

`src/main/webapp/WEB-INF/lib/` に以下があるか確認：
- `mysql-connector-java-x.x.x.jar`

---
# データベースの追加
ルートディレクトリ内のMYSQLのコマンドラインにコピペする。


### jdbc.propertiesの設定

`src/main/webapp/WEB-INF/lib/jdbc.properties` を自分の環境に合わせて編集：

```properties
jdbc.url=jdbc:mysql://localhost:3306/recipe
jdbc.user=root
jdbc.password=自分のパスワード
```

#### jdbc.propertiesがない場合（新規作成）

このファイルは `.gitignore` で除外されているため、クローンしても含まれません。
自分で新規作成する必要があります。

**作成手順：**

1. Eclipseで `src/main/webapp/WEB-INF/lib/` フォルダを右クリック
2. **新規** → **ファイル** を選択
3. ファイル名に `jdbc.properties` と入力
4. 「完了」をクリック
5. 以下の内容をコピペして保存：

```properties
# データベース接続設定
jdbc.url=jdbc:mysql://localhost:3306/recipe
jdbc.user=root
jdbc.password=ここに自分のMySQLパスワードを入力
```

**ファイルの場所（確認用）：**
```
プロジェクト/
└── src/
    └── main/
        └── webapp/
            └── WEB-INF/
                └── lib/
                    ├── jdbc.properties      ← ここに作成
                    └── mysql-connector-java-x.x.x.jar
```

**注意**:
- パスワードは各自のMySQL環境に合わせて設定してください
- このファイルは `.gitignore` に追加して、絶対にコミットしないでください

---

### .gitignoreの作成

`.gitignore` はGitで管理しないファイルを指定する設定ファイルです。
パスワードを含むファイルやビルド成果物を除外します。

## 作成方法
1. Eclipseでプロジェクト名を右クリック
2. **新規** → **ファイル** を選択
3. ファイル名に `.gitignore` と入力（先頭のドットを忘れずに）
4. 「完了」をクリック
5. 先生から配布されたgitignoreの内容をコピペして保存：


**既にコミットしてしまったファイルを除外する場合：**

```bash
# キャッシュをクリアして.gitignoreを反映
git rm -r --cached .
git add .
git commit -m ".gitignoreを適用"
git push
```

---

## 7. 動作確認

1. サーバーを右クリック → **開始**
2. ブラウザで `http://localhost:8080/プロジェクト名/home` にアクセス
3. 画面が表示されればOK

---

## 8. 開発の流れ

### 作業開始前（毎回）

最新の変更を取得：

```bash
git pull origin main
```

### 変更をプッシュ

```bash
# 変更を確認
git status

# ステージング
git add .

# コミット
git commit -m "変更内容を書く"

# プッシュ
git push origin main
```

---

## よくあるトラブルと解決法

### エラー: "Cannot change version of project facet Dynamic Web Module"

1. プロジェクトを右クリック → **プロパティ**
2. **プロジェクト・ファセット** を開く
3. 「Dynamic Web Module」のバージョンを調整（3.1や4.0など）

### エラー: "The import javax.servlet cannot be resolved"

Tomcatライブラリがビルドパスにない：

1. プロジェクトを右クリック → **ビルド・パス** → **ビルド・パスの構成**
2. **ライブラリー** タブ → **ライブラリーの追加**
3. **サーバー・ランタイム** → **Apache Tomcat** を選択
4. 「完了」→「適用して閉じる」

### エラー: "Port 8080 already in use"

他のプロセスがポートを使用中：

```bash
# Windows: ポートを使用しているプロセスを確認
netstat -ano | findstr :8080

# プロセスを終了（PIDは上のコマンドで確認）
taskkill /PID プロセスID /F
```

### 文字化け

1. プロジェクトを右クリック → **プロパティ**
2. **リソース** → テキスト・ファイル・エンコードを **UTF-8** に設定

---

## チーム開発のコツ

### 1. ブランチを使う

直接 `main` にプッシュせず、機能ごとにブランチを作成：

```bash
# 新しいブランチを作成して切り替え
git checkout -b feature/お気に入り機能

# 作業してコミット
git add .
git commit -m "お気に入り機能を追加"

# ブランチをプッシュ
git push origin feature/お気に入り機能
```

その後、GitHubでPull Requestを作成してレビュー後にマージ。

### 2. コンフリクトを避ける

- 同じファイルを複数人で同時に編集しない
- 作業前に必ず `git pull` する
- こまめにコミット・プッシュする

### 3. コンフリクトが起きたら

```bash
# 最新を取得
git pull origin main

# コンフリクトしたファイルを手動で編集
# <<<<<<< HEAD と >>>>>>> の間を整理

# 解決したらコミット
git add .
git commit -m "コンフリクトを解決"
git push
```

---

## チェックリスト

クローン後の確認項目：

- [ ] プロジェクトがEclipseに表示される
- [ ] エラーマーカー（赤い×）がない
- [ ] Tomcatサーバーにプロジェクトが追加されている
- [ ] jdbc.propertiesが自分の環境に設定されている
- [ ] データベースが初期化されている
- [ ] `http://localhost:8080/コンテキストルート名` が表示される
